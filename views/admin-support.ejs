<%- include("partials/header")-%>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <link rel="stylesheet" href="../css/support.css">
    <title>Admin Support</title>
    </head>

    <body>
        <div class="background">
            <img class="header-image" src="../images/logo_img.png" alt="">
            <div class="header">
                <p class="heading">Admin Support Dashboard</p>
                <a href="/logout">
                    <img class="logout" src="../images/logout.png" alt="">
                    <img class="logout_text" src="../images/logout_text.png" alt="">
                </a>
            </div>
            <div class="message-text"></div>
            <div class="messages">Notifications</div>
            <div class="box">
                <div class="list-user-section">
                    <a href="/admin-support" class="conference-div">
                        <div class="list-conference">Notifications
                        </div>
                    </a>
                    <a href="/admin-send-notification" class="conference-div">
                        <div class="list-conference">Send Notifications</div>
                    </a>
                    <%usersWithSupportChat.forEach(function(user){%>
                        <div class="conference-div">
                            <a href="/admin-support-chat/<%= user.conferenceShortName %>/<%= user.username %>"
                                class="list-conference">
                                <%= user.name %> from <%= user.conferenceName %>
                            </a>
                        </div>
                        <% }) %>
                </div>
                <div class="notification-background">
                    <div class="message-flow">
                        <div class="notification-text">
                            <p class="text-message">This is the Notification Section. <br>
                                All the Notification sent by you will be displayed here. <br>
                                All the Support query chats will appear below Send Notification Tab <br>
                            </p>
                            <p class="messaged-by">
                                CMP Development Team
                            </p>
                            <p class="message-time">21-12-2023 05:31 PM</p>
                        </div>
                        <%allNotifications.forEach(function(notification){%>
                            <div class="notification-text">
                                <p class="text-message">
                                    <%= notification.notification %>
                                </p>
                                <p class="messaged-by">
                                    <%= notification.sender %> | <%= notification.conferenceName %>
                                </p>
                                <p class="message-time">
                                    <%= formatDate(notification.time) %>
                                </p>
                            </div>
                            <% }) %>
                    </div>
                </div>
            </div>
            <%- include("partials/footer")-%>
                <script>
        <% function formatDate(dateString) { %>
        <% const options = { day: "2-digit", month: "2-digit", year: "numeric", hour: "2-digit", minute: "2-digit" }; %>
        <% const formattedDate = new Date(dateString).toLocaleDateString("en-GB", options); %>
        <% const formattedTime = new Date(dateString).toLocaleTimeString("en-GB", { hour: "2-digit", minute: "2-digit" }); %>
        <% const finalFormattedDate = `${formattedDate.split("/").join("-")}`; %>
        <% return finalFormattedDate; %>
        <% } %>
                </script>
    </body>

    </html>